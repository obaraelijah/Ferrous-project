{"openapi":"3.0.3","info":{"title":"ferrous","description":"The core component of ferrous-project","contact":{"name":"Elijah Samson","email":"elijahsamson@sam.dev"},"license":{"name":"AGPL-3.0"},"version":"0.1.0"},"paths":{"/api/v1/export/workspace/{uuid}":{"get":{"tags":["Data Export"],"operationId":"export_workspace","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"All hosts in the workspace","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AggregatedWorkspace"}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer_token":[]}]}},"/api/v1/oauth-server/token":{"post":{"tags":["OAuth"],"summary":"Endpoint an application calls itself after the user accepted and was redirected back to it.","description":"Endpoint an application calls itself after the user accepted and was redirected back to it.","operationId":"token","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRequest"}}},"required":true},"responses":{"302":{"description":"Got token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenError"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenError"}}}}}}},"/api/v1/oauth/auth":{"get":{"tags":["OAuth"],"summary":"Initial endpoint an application redirects the user to.","description":"Initial endpoint an application redirects the user to.\n\nIt requires both the `state` parameter against CSRF, as well as a pkce challenge.\nThe only supported pkce `code_challenge_method` is `S256`.","operationId":"auth","parameters":[{"name":"response_type","in":"query","description":"Value MUST be set to \"code\".","required":true,"schema":{"type":"string"}},{"name":"client_id","in":"query","description":"The client identifier as described in [Section 2.2](https://www.rfc-editor.org/rfc/rfc6749#section-2.2).","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"redirect_uri","in":"query","description":"As described in [Section 3.1.2](https://www.rfc-editor.org/rfc/rfc6749#section-3.1.2).","required":false,"schema":{"type":"string","nullable":true}},{"name":"scope","in":"query","description":"The scope of the access request as described by [Section 3.3](https://www.rfc-editor.org/rfc/rfc6749#section-3.3).","required":true,"schema":{"type":"string"}},{"name":"state","in":"query","description":"An opaque value used by the client to maintain\nstate between the request and callback.  The authorization\nserver includes this value when redirecting the user-agent back\nto the client.  The parameter SHOULD be used for preventing\ncross-site request forgery as described in [Section 10.12](https://www.rfc-editor.org/rfc/rfc6749#section-10.12).","required":true,"schema":{"type":"string"}},{"name":"code_challenge","in":"query","description":"Pkce Code challenge.","required":true,"schema":{"type":"string"}},{"name":"code_challenge_method","in":"query","description":"Code verifier transformation method is \"S256\" or \"plain\".\nIt defaults to \"plain\" if not present in the request.","required":false,"schema":{"type":"string","enum":["S256","plain"]}}],"responses":{"302":{"description":"The user is redirected to the frontend"},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"api_key":[]}]}}},"components":{"schemas":{"AggregatedHost":{"type":"object","description":"A representation of an host.","required":["uuid","ip_addr","os_type","ports","services","comment"],"properties":{"uuid":{"type":"string","format":"uuid","description":"The host's uuid"},"ip_addr":{"type":"string","description":"The IP address of the host.\n\nIf the host has multiple addresses, create a [Host] for each and link them."},"os_type":{"$ref":"#/components/schemas/OsType"},"response_time":{"type":"integer","format":"int32","description":"Response time in ms","nullable":true},"ports":{"type":"array","items":{"type":"string","format":"uuid"},"description":"The ports of a host"},"services":{"type":"array","items":{"type":"string","format":"uuid"},"description":"The services of a host"},"comment":{"type":"string","description":"A comment to the host"}}},"AggregatedPort":{"type":"object","description":"An open port on a host","required":["uuid","port","protocol","host","services","comment"],"properties":{"uuid":{"type":"string","format":"uuid","description":"The port's uuid"},"port":{"type":"integer","format":"int32","description":"Port number","minimum":0},"protocol":{"$ref":"#/components/schemas/PortProtocol"},"host":{"type":"string","format":"uuid","description":"The host this service is attached to"},"services":{"type":"array","items":{"type":"string","format":"uuid"},"description":"The services that link to this port"},"comment":{"type":"string","description":"A comment to the port"}}},"AggregatedService":{"type":"object","description":"A detected service on a host","required":["uuid","name","host","comment"],"properties":{"uuid":{"type":"string","format":"uuid","description":"The service's uuid"},"name":{"type":"string","description":"Name of the service"},"version":{"type":"string","description":"Optional version of the service","nullable":true},"host":{"type":"string","format":"uuid","description":"The host this service is attached to"},"port":{"type":"string","format":"uuid","description":"The port this service is attached to","nullable":true},"comment":{"type":"string","description":"A comment to the service"}}},"AggregatedWorkspace":{"type":"object","description":"The aggregated results of a workspace","required":["hosts","ports","services"],"properties":{"hosts":{"type":"object","description":"The hosts found by this workspace","additionalProperties":{"$ref":"#/components/schemas/AggregatedHost"}},"ports":{"type":"object","description":"The ports found by this workspace","additionalProperties":{"$ref":"#/components/schemas/AggregatedPort"}},"services":{"type":"object","description":"The services found by this workspace","additionalProperties":{"$ref":"#/components/schemas/AggregatedService"}}}},"ApiErrorResponse":{"type":"object","description":"Representation of an error response\n\n`status_code` holds the error code, `message` a human readable description of the error","required":["status_code","message"],"properties":{"status_code":{"$ref":"#/components/schemas/ApiStatusCode"},"message":{"type":"string","example":"Error message will be here"}}},"ApiStatusCode":{"type":"integer","description":"This type holds all possible error types that can be returned by the API.\n\nNumbers between 1000 and 1999 (inclusive) are client errors that can be handled by the client.\nNumbers between 2000 and 2999 (inclusive) are server errors.","default":1000,"enum":[1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,2000,2001,2002,2003,2004],"example":1000},"GrantType":{"type":"string","enum":["authorization_code"]},"OsType":{"type":"string","description":"A representation of an OS type","enum":["Unknown","Linux","Windows","Apple","Android","FreeBSD"]},"PortProtocol":{"type":"string","description":"A protocol of a port","enum":["Unknown","Tcp","Udp"]},"TokenError":{"type":"object","description":"Possible error response when requesting an access token.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/TokenErrorType"},"error_description":{"type":"string","description":"Human-readable ASCII \\[[USASCII](https://www.rfc-editor.org/rfc/rfc6749#ref-USASCII)\\] text providing\nunderstanding the error that occurred.","nullable":true}}},"TokenErrorType":{"type":"string","description":"Possible error types of a [`TokenError`]","enum":["invalid_request","invalid_client","invalid_grant","unauthorized_client","unsupported_grant_type","invalid_scope","server_error"]},"TokenRequest":{"type":"object","required":["grant_type","code","redirect_uri","client_id","client_secret","code_verifier"],"properties":{"grant_type":{"$ref":"#/components/schemas/GrantType"},"code":{"type":"string","format":"uuid"},"redirect_uri":{"type":"string"},"client_id":{"type":"string","format":"uuid"},"client_secret":{"type":"string"},"code_verifier":{"type":"string","description":"Code verifier"}}},"TokenResponse":{"type":"object","required":["token_type","access_token","expires_in"],"properties":{"token_type":{"$ref":"#/components/schemas/TokenType"},"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64","description":"Duration in seconds the token is valid for","minimum":0}}},"TokenType":{"type":"string","enum":["access_token"]}},"securitySchemes":{"bearer_token":{"type":"http","scheme":"bearer"}}}}